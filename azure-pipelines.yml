trigger:
- admin_app

pool:
  name: CI for Administration
  vmImage: 'Ubuntu-16.04'

variables:
  imageName: 'gis/adminapp:$(build.buildNumber)'

steps:
- task: Docker@1
  displayName: Build an image
  inputs:
    projects: '$(build.sourcesdirectory)/Applications/AdminManagementApp/AdminManagementApp.csproj'
    command: Build an image
    containerregistrytype: Azure Container Registry
    dockerRegistryEndpoint: GISDockerRegistry
    dockerFile: Dockerfile
    imageName: $(imageName)
    imageNamesPath: 
    restartPolicy: always
- task: Docker@1
  displayName: Push an image
  inputs:
    command: Push an image
    containerregistrytype: Azure Container Registry
    dockerRegistryEndpoint: GISDockerRegistry
    dockerFile: Dockerfile
    imageName: $(imageName)
    imageNamesPath: 
    restartPolicy: always
